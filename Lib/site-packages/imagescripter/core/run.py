from imagescripter import *
from imagescripter import *
from time import ctime
import datetime
import ntplib
import re
## setup configurator
Configurator.Start()
Configurator.basicinformation.Click()
Configurator.ComboBox.Select(1, 'US/Eastern')
Configurator.apply.Click()
Configurator.systemtime.Click()
## get controller time
controller_datetime = Configurator.Edit.GetText(1)
datetimeObj = datetime.datetime.strptime(controller_datetime, '%A %m/%d/%Y %I:%M:%S %p')
controller_time = datetimeObj.timestamp()
## get server time
c = ntplib.NTPClient()
response = c.request('time.google.com')
server_time = response.tx_time
## compare times
if controller_time < server_time + 30 and controller_time > server_time - 30: ## if within a minute
	print('Time is synchronized')
else:
	raise ValueError('Time is not synchronized')
	
Configurator.CloseAndClean()	
	
	
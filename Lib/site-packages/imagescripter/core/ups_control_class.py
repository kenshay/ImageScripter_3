import telnetlib



class Ups_Class():

    def setIP(self,ip):
        self.ip = ip
        print('IP Set',ip)

    def setIp(self,ip):
        self.ip = ip
        print('IP Set', ip)

    def SetIp(self,ip):
        self.ip = ip
        print('IP Set', ip)

    def SetIP(self,ip):
        self.ip = ip
        print('IP Set', ip)

    def checkip(self):
        try:
            print(self.ip)
        except:
            raise ValueError("Please set up with 'UPS.SetIP('192.168.0.22')'")


    
    def On(self,x):
        self.checkip()
        x = str(x)
        string = "!SWITCH " +  x + " ON"
        tn = telnetlib.Telnet(self.ip, 23)
        user = ""
        tn.write(string.encode('ascii') + "\r\n".encode('ascii'))
        tn.close()
        print('Powered ON')

    
    def Off(self,x):
        self.checkip()
        x = str(x)
        string = "!SWITCH " +  x + " OFF"
        tn = telnetlib.Telnet(self.ip, 23)
        user = ""
        tn.write(string.encode('ascii') + "\r\n".encode('ascii'))
        tn.close()
        print('Powered OFF')

    def AllOff(self):
        self.checkip()
        for x in range(20):
            x = str(x)
            string = "!SWITCH " +  x + " OFF"
            tn = telnetlib.Telnet(self.ip, 23)
            user = ""
            tn.write(string.encode('ascii') + "\r\n".encode('ascii'))
            tn.close()
            print('Powered OFF')


    def AllOn(self):
        self.checkip()
        for x in range(20):
            x = str(x)
            string = "!SWITCH " +  x + " ON"
            tn = telnetlib.Telnet(self.ip, 23)
            user = ""
            tn.write(string.encode('ascii') + "\r\n".encode('ascii'))
            tn.close()
            print('Powered ON')



#Ups = Ups_Class()
#Ups.setIP("192.168.0.102")


#Ups.AllOff()
#Ups.AllOn()
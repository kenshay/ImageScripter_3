from paths import project_path
import sys
import socket
sys.path.append(project_path)

from elan import *


from imagescripter.core.ups_control_class import Ups_Class



UPS = Ups_Class()

Ups = Ups_Class()

ups = Ups_Class()


import socket

#'192.168.0.60'

def GC(relay,on_or_off,ip = '192.168.0.236'):
    if on_or_off == 'on':
        on_or_off = 1
    if on_or_off == 'off':
        on_or_off = 0
    port = 4998                   # The same port as used by the server
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((ip, port))
    #s.sendall(b'setstate,1:1,1\r')
    command = 'setstate,1:xrelayx,xon_or_offx\r'
    command = command.replace('xrelayx',str(relay))
    command = command.replace('xon_or_offx',str(on_or_off))
    command = str.encode(command)
    print(command)
    s.sendall(command)
    data = s.recv(1024)
    s.close()
    print('Received', repr(data))
    print(data.decode("UTF-8"))
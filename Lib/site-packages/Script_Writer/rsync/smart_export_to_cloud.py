import os

import os
import shutil, errno

def copyanything(src, dst):
    try:
        shutil.copytree(src, dst)
    except OSError as exc: # python >2.5
        if exc.errno == errno.ENOTDIR:
            shutil.copy(src, dst)
        else: raise


old_elan = r"C:/Settings/elan/"
new_elan = r"C:/ImageScripter_2/Lib/site-packages/elan/"

Path = r"C:\ImageScripter_2\Lib\site-packages\Script_Writer\rsync"
os.chdir(Path)

try:
    shutil.rmtree('old')
    print('Removed /OLD')
except Exception as e:
    print(e)

try:
    shutil.rmtree('new')
    print('Removed /NEW')
except Exception as e:
    print(e)

try:
    shutil.rmtree('difference')
    print('Removed /DIFF')
except Exception as e:
    print(e)



print("Copying New")
copyanything(new_elan,'new')
print("Copied")
print("Copying OLD")
copyanything(old_elan,'old')
print("Copied")





#"C:/Settings/elan/"
#"C:/ImageScripter_2/Lib/site-packages/elan/"
#rsync -rvcm --compare-dest=../old/ new/ difference/

os.system("rsync  -rvcm --no-p --no-g --no-o --compare-dest=../old/ new/ difference/")



#os.system("rsync -rvcm  --compare-dest=../old/ new/ difference/")
#os.system("rsync -rvcm --no-perms --no-owner --no-group --compare-dest=../old/ new/ difference/")
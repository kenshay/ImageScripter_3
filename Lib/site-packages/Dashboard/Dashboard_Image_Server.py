import socket
import sys
import cv2
import pickle
import numpy as np
import struct ## new
import zlib

while True:
    try:
        HOST = '172.16.42.56'
        #HOST = '127.0.0.1'
        PORT=8485
        with socket.socket(socket.AF_INET,socket.SOCK_STREAM) as s:
            s.bind((HOST,PORT))
            s.listen(10)
            conn,addr=s.accept()
            image = b''
            while True:
                piece = conn.recv(1024)
                if not piece:
                    break
                image += piece
            with open(r"C:\Eluminate\System\ImageScripter\Lib\site-packages\Dashboard\Connected_Controllers\image.png",'wb') as f:
                f.write(image)
    except Exception as e:
        print(e)

from yattag import Doc
from yattag import indent
import random
import os
from paramiko import SSHClient
import paramiko
import time
import traceback
from scp import SCPClient
from Database_Manager.Dictionary_Database_Manager import Dictionary_Database_Manager_Class
from paths import MAX_CUTOFF,Dictionary_Database_Location,Ignore_Graph_Script_List, All_Scripts_Folder_Location, Active_Build, Graph_Folder_Location, \
    Active_Build_without_EXE








######################## MAIN N##############################
Dictionary_Database_Manager = Dictionary_Database_Manager_Class(Dictionary_Database_Location,BUILD_VAR='8_5_17_0')
Last_Five_Build = Dictionary_Database_Manager.get_last_5_builds()
Stations_List = Dictionary_Database_Manager.get_all_station_names()
doc, tag, text = Doc().tagtext()
doc.asis('<!DOCTYPE HTML>')
with tag('html', lang=" en"):
    with tag('head'):
        doc.asis('<!-- basic.html -->')
        doc.asis('<meta http-equiv="refresh" content="999">')
        with tag('title'):
            text('basic.html')
        doc.asis('<meta charset = "UTF-8" />')

        with tag('style'):
            doc.asis('div {'
                     'display:inline-block;'
                     'float:left;'
                     'text-align: center;'
                     'list-style-type:none;'
                     'padding-left: 10%;'
                     'padding-right: 10%;'
                     '}'

                     'ul {'
                     'list-style-type:none;'
                     'text-align: center;'
                     '}'
                     )

        #doc.asis('<link rel="stylesheet" href="style.css">')
    with tag('body'):
        for station_name in Stations_List:
            with tag('div'):
                with tag('h4'):
                    text(station_name)
                with tag('ul'):
                    for build in Last_Five_Build:
                        with tag('li'):
                            doc.asis('<a href="google.com">{}</a>'.format(build))



        #for station_name in Stations_List:
        #    with tag('table'):
        #        with tag('tr'):
        #            with tag('td'):
        #                text(station_name)
        #        for i in Last_Five_Build:
        #            with tag('td'):
        #                doc.asis('<a href="google.com">{}</a>'.format(i))

result = indent(doc.getvalue())
place = r"C:\xampp\htdocs\index.php"
with open(place, 'w+') as f:
    f.write(result)
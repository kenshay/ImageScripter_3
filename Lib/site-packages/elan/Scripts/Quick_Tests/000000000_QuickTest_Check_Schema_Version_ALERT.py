
from elan.ssh_manager import SSH_Manager_Class
from imagescripter.core.variable_file_getter import Variable_File_Getter


IP = Variable_File_Getter.getVariableFromFile('Controller_IP')
Port = int(Variable_File_Getter.getVariableFromFile('Elan_Controller_Port'))
User = Variable_File_Getter.getVariableFromFile('Elan_Controller_User_Name')
Password = Variable_File_Getter.getVariableFromFile('Elan_Controller_Password')


SSH_Manager = SSH_Manager_Class(ipaddress=IP, port=Port, username=User, password=Password)

Old_Schema = r'Schema:1455'
#Old_Schema = r'Schema:1456'
New_Schema = SSH_Manager.get_schema_version()
print(New_Schema)

if Old_Schema not in New_Schema:
    raise ValueError('Schema Changed -> ',Old_Schema,' To -> ', New_Schema)
else:
    print('Schema Has Not Changed')
    pass





#OLD Way
'''

from elan import *
Schema = '1233'
Configurator.Reset(start=True)
Configurator.Start(password ="")
Configurator.basicinformation.Click()
for i in range(10):
    print("Index -> ",i)
    print(Configurator.Edit.GetText(i))
if Configurator.Edit.GetText(i) != Schema:
	Configurator.CloseAndClean()
	raise ValueError("Schema has changed")
Configurator.CloseAndClean()
'''
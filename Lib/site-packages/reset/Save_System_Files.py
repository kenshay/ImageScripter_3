from paths import *
import os
import shutil, errno
from dirsync import sync
#"C:\Ellumination\System\ImageScripter\.git\index.lock"
try:
    os.remove(IMAGESCRIPTERPATH + r"\System\ImageScripter\.git\index.lock")
    os.remove(IMAGESCRIPTERPATH + r"\Projects\_elan_\elan")
except:
    pass

with open("C:\gitlog.txt",'w') as f:
    f.write('')


print('########################################')
print("\n\n\nSave System Files\n\n\n")
print('########################################')
##Elan_Folder2 = r"C:\ImageScripter_2\Lib\site-packages\elan"
##Elan_Folder_Settings = r"C:\Settings\elan"



#source = PROJECT
#destination = Elan_Folder_Settings


#def copyanything(src, dst):
#    try:
#        shutil.copytree(src, dst)
#    except OSError as exc: # python >2.5
#        if exc.errno == errno.ENOTDIR:
#            shutil.copy(src, dst)
#        else: raise
#print("Starting Reset")
##gitProject = r"C:\ImageScripter_2"

##git = r"C:\ImageScripter_2\Sync\cmd\git.exe"
print('Saving -> ',gitProject)
os.chdir(gitProject)

print(git)

os.system(git + ' add --all  >> C:\gitlog.txt')
os.system(git + " commit -a -m 'asd'  >> C:\gitlog.txt")
os.system(git + ' pull  >> C:\gitlog.txt')
os.system(git + ' push  >> C:\gitlog.txt')
os.system(git + ' status >> C:\gitlog.txt')



#sync(source,destination, 'sync', purge = True)
print(gitProject)
#input("Finished Save, you can now close this window")


with open("C:\gitlog.txt") as f:
    print(f.read())



#try:
#    shutil.rmtree(old_elan)
#except Exception as e:
#    print(e)
#print('Please Wait...')
#copyanything(elan_folder, old_elan)
#input("Finished Reset")


import sys
from PyQt5.QtWidgets import QApplication, QWidget
from PyQt5.QtGui import QIcon
from database_manager import DataBase_Manager
from PyQt5 import QtGui, uic, Qt
from PyQt5.QtGui import QStandardItemModel,QStandardItem
class Database_Viewer_Class(QWidget):

    def __init__(self):
        super().__init__()
        self.ui = uic.loadUi(r"database_viewer.ui")
        #Data = DataBase_Manager.get_data_from_databases(Target='Index_Time,Script_Name')
        Data = DataBase_Manager.get_data_from_databases(Target='Index_Time,Date,Station_Name,Controller_Build')
        model = QStandardItemModel()
        List_OF_List = []
        for d in Data:
             d = list(d)
             List_OF_List.append(d)
        List_OF_List.sort(key=lambda x: x[0])
        print(List_OF_List)
        for i in reversed(List_OF_List):
            #print(i)
            model.appendRow(QStandardItem(str(i)))
        self.ui.listView.setModel(model)

        self.ui.show()







if __name__ == '__main__':
    app = QApplication(sys.argv)
    Database_Viewer = Database_Viewer_Class()
    sys.exit(app.exec_())